---
import { Icon } from "astro-icon/components";
---

<header
	id="navbar"
	class="h-20 w-full bg-white/95 fixed top-0 transition-all duration-300 z-50 backdrop-blur-md border-b border-gray-100"
>
	<div class="container mx-auto px-4 md:px-6 h-full flex items-center justify-between">
		<a href="#" class="flex items-center gap-3 group" id="logo-link">
			<Icon name="ekomod-logo" class="w-10 h-10 md:w-12 md:h-12 transition-transform group-hover:scale-105" />
			<span class="text-2xl font-black md:text-3xl bg-gradient-to-r from-[#355070] to-[#2a4058] bg-clip-text text-transparent group-hover:from-[#E89B33] group-hover:to-[#6B8E23] transition-all duration-300">
				EKOMOD
			</span>
		</a>

		<!-- Desktop navigation -->
		<nav class="hidden md:flex items-center gap-2 lg:gap-4">
			<a href="#container" class="nav-link relative px-4 py-2 text-gray-600 hover:text-[#355070] font-medium transition-colors group">
				Inicio
				<span class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.5 bg-gradient-to-r from-[#E89B33] to-[#6B8E23] group-hover:w-3/4 transition-all duration-300 rounded-full"></span>
			</a>
			<a href="#houses" class="nav-link relative px-4 py-2 text-gray-600 hover:text-[#355070] font-medium transition-colors group">
				Modelos
				<span class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.5 bg-gradient-to-r from-[#E89B33] to-[#6B8E23] group-hover:w-3/4 transition-all duration-300 rounded-full"></span>
			</a>
			<a href="#gallery" class="nav-link relative px-4 py-2 text-gray-600 hover:text-[#355070] font-medium transition-colors group">
				Galería
				<span class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.5 bg-gradient-to-r from-[#E89B33] to-[#6B8E23] group-hover:w-3/4 transition-all duration-300 rounded-full"></span>
			</a>
			<a href="#faq" class="nav-link relative px-4 py-2 text-gray-600 hover:text-[#355070] font-medium transition-colors group">
				FAQ
				<span class="absolute bottom-0 left-1/2 -translate-x-1/2 w-0 h-0.5 bg-gradient-to-r from-[#E89B33] to-[#6B8E23] group-hover:w-3/4 transition-all duration-300 rounded-full"></span>
			</a>
			<a
				href="#contact-us"
				class="ml-2 px-6 py-2.5 bg-gradient-to-r from-[#355070] to-[#2a4058] text-white rounded-xl font-semibold hover:from-[#E89B33] hover:to-[#d68a24] transition-all duration-300 hover:shadow-lg hover:shadow-[#E89B33]/25 hover:scale-105"
			>
				Contacto
			</a>
		</nav>

		<!-- Mobile hamburger button -->
		<button
			id="mobile-menu-btn"
			class="md:hidden p-2 text-gray-700 hover:text-[#355070] transition-colors rounded-lg hover:bg-gray-100"
			aria-label="Abrir menú"
		>
			<svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
			</svg>
		</button>
	</div>
</header>

<!-- Full-screen mobile menu overlay -->
<div
	id="mobile-menu"
	class="fixed inset-0 bg-gradient-to-br from-[#355070] via-[#2a4058] to-[#1f2f40] z-[100] hidden md:hidden transition-opacity duration-300 overflow-hidden"
>
	<!-- Decorative background elements -->
	<div class="absolute inset-0 overflow-hidden pointer-events-none">
		<div class="absolute bottom-20 left-10 w-40 h-40 bg-[#E89B33] rounded-full blur-3xl opacity-20"></div>
		<div class="absolute top-32 right-10 w-32 h-32 bg-[#6B8E23] rounded-full blur-3xl opacity-20"></div>
		<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-white rounded-full blur-3xl opacity-5"></div>
	</div>

	<div class="flex flex-col h-full relative z-10">
		<!-- Header with logo and close button -->
		<div class="flex items-center justify-between p-4 h-20">
			<div class="flex items-center gap-3">
				<Icon name="ekomod-logo" class="w-10 h-10" />
				<span class="text-2xl font-black bg-gradient-to-r from-[#E89B33] to-[#6B8E23] bg-clip-text text-transparent">
					EKOMOD
				</span>
			</div>
			<button
				id="mobile-menu-close"
				class="p-2 text-white/80 hover:text-white hover:bg-white/10 transition-all rounded-lg"
				aria-label="Cerrar menú"
			>
				<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
				</svg>
			</button>
		</div>

		<!-- Navigation links - large and touch-friendly -->
		<nav class="flex-1 flex flex-col items-center justify-center gap-6 px-6">
			<a
				href="#container"
				class="mobile-nav-link text-2xl text-white/90 font-semibold hover:text-[#E89B33] transition-all py-2 px-6 rounded-xl hover:bg-white/5"
			>
				Inicio
			</a>
			<a
				href="#houses"
				class="mobile-nav-link text-2xl text-white/90 font-semibold hover:text-[#E89B33] transition-all py-2 px-6 rounded-xl hover:bg-white/5"
			>
				Modelos
			</a>
			<a
				href="#gallery"
				class="mobile-nav-link text-2xl text-white/90 font-semibold hover:text-[#E89B33] transition-all py-2 px-6 rounded-xl hover:bg-white/5"
			>
				Galería
			</a>
			<a
				href="#faq"
				class="mobile-nav-link text-2xl text-white/90 font-semibold hover:text-[#E89B33] transition-all py-2 px-6 rounded-xl hover:bg-white/5"
			>
				FAQ
			</a>
			<a
				href="#contact-us"
				class="mobile-nav-link mt-4 px-10 py-4 bg-gradient-to-r from-[#E89B33] to-[#d68a24] text-white rounded-xl text-xl font-bold hover:shadow-lg hover:shadow-[#E89B33]/30 transition-all"
			>
				Contacto
			</a>
		</nav>

		<!-- Bottom info -->
		<div class="p-6 text-center">
			<p class="text-white/40 text-sm">Casas modulares sostenibles</p>
		</div>
	</div>
</div>

<script>
	let lastScrollTop = 0;
	const navbar = document.getElementById("navbar");
	const mobileMenuBtn = document.getElementById("mobile-menu-btn");
	const mobileMenuClose = document.getElementById("mobile-menu-close");
	const mobileMenu = document.getElementById("mobile-menu");

	// Scroll to top when logo is clicked
	document.getElementById("logo-link")?.addEventListener("click", (e) => {
		e.preventDefault();
		window.scrollTo({ top: 0, behavior: "smooth" });
	});

	// Handle scroll behavior
	window.addEventListener("scroll", function () {
		let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

		if (scrollTop > lastScrollTop && scrollTop > 100) {
			navbar?.classList.add("active");
		} else {
			navbar?.classList.remove("active");
		}

		lastScrollTop = scrollTop;
	});

	// Open mobile menu
	mobileMenuBtn?.addEventListener("click", () => {
		mobileMenu?.classList.remove("hidden");
		document.body.style.overflow = "hidden";
	});

	// Close mobile menu
	mobileMenuClose?.addEventListener("click", () => {
		mobileMenu?.classList.add("hidden");
		document.body.style.overflow = "";
	});

	// Close menu when clicking a mobile nav link
	document.querySelectorAll(".mobile-nav-link").forEach((link) => {
		link.addEventListener("click", (e) => {
			const href = link.getAttribute("href");
			if (href && href.startsWith("#")) {
				e.preventDefault();
				mobileMenu?.classList.add("hidden");
				document.body.style.overflow = "";
				const target = document.querySelector(href);
				if (target) {
					target.scrollIntoView({ behavior: "smooth" });
				}
			}
		});
	});

	// Smooth scroll for desktop nav links
	document.querySelectorAll('.nav-link, a[href^="#"]').forEach(anchor => {
		anchor.addEventListener('click', function (e) {
			const href = this.getAttribute('href');
			if (href && href.startsWith('#') && !this.classList.contains('mobile-nav-link')) {
				e.preventDefault();
				const target = document.querySelector(href);
				if (target) {
					target.scrollIntoView({ behavior: 'smooth' });
				}
			}
		});
	});
</script>

<style>
	header.active {
		transform: translateY(-100%);
	}
</style>
